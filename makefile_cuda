


all: filter_cuda

filter_cuda: filter_math.o obs_math.o filter_io.o convert.o filter_cuda.o device_filter_math.o cuda_util.o
	nvcc -I hdr -lm src/cuda/filter_cuda.o src/common/convert.o src/common/filter_io.o src/common/obs_math.o src/common/filter_math.o src/cuda/device_filter_math.o src/cuda/cuda_util.o -o bin/filter_cuda

device_filter_math.o:
	nvcc -I hdr -c -lm src/cuda/device_filter_math.cu -o src/cuda/device_filter_math.o

cuda_util.o:
	nvcc -I hdr -c -lm src/cuda/cuda_util.cu -o src/cuda/cuda_util.o

filter_cuda.o:
	gcc -I hdr -c -lm src/cuda/filter_cuda.c -o src/cuda/filter_cuda.o

filter_math.o:
	gcc -I hdr -c -lm src/common/filter_math.c -o src/common/filter_math.o

obs_math.o:
	gcc -I hdr -c -lm src/common/obs_math.c -o src/common/obs_math.o

filter_io.o:
	gcc -I hdr -c -lm src/common/filter_io.c -o src/common/filter_io.o

convert.o:
	gcc -I hdr -c -lm src/common/convert.c -o src/common/convert.o

clean:
	rm bin/filter_cuda src/serial/filter_cuda.o src/common/filter_math.o src/common/obs_math.o src/common/filter_io.o src/common/convert.o src/cuda/device_filter_math.o







filter_cuda_kernel_simple: filter_cuda_kernel_simple.o filter_cuda_simple.o filter_math.o obs_math.o filter_io.o convert.o
	nvcc -I hdr -lcuda -lcudart -lm src/cuda/filter_cuda_kernel_simple.o src/cuda/filter_cuda_simple.o src/common/filter_math.o src/common/obs_math.o src/common/filter_io.o src/common/convert.o -o bin/filter_cuda_simple

filter_cuda_simple.o:
	gcc -I hdr -c src/cuda/filter_cuda_simple.c -o src/cuda/filter_cuda_simple.o

filter_cuda_kernel_simple.o:
	nvcc -I hdr -c src/cuda/filter_cuda_kernel_simple.cu -o src/cuda/filter_cuda_kernel_simple.o




